{"ast":null,"code":"import { apiFetch } from \"../main.js\";\nimport post from \"../components/Post.vue\";\nexport default {\n  name: \"UserView\",\n  components: {\n    post\n  },\n  data() {\n    return {\n      posts: [],\n      user: {},\n      currentUser: {},\n      showInput: false,\n      selectedComment: {},\n      selectedPost: {},\n      comment: \"\",\n      commentsShown: false,\n      isBeeingEddited: false\n    };\n  },\n  methods: {\n    async getPosts() {\n      let response = await apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" + this.$route.params.username);\n      let responseData = await response.json();\n      this.posts = responseData.posts;\n      console.log(responseData);\n    },\n    selectPost(post) {\n      this.selectedPost = post;\n    },\n    selectComment(comm) {\n      if (this.showInput) {\n        this.selectedComment = comm;\n      }\n    },\n    showInputFunction() {\n      this.showInput = !this.showInput;\n      this.selectedComment = \"\";\n    },\n    async createComment() {\n      let requestData = {\n        text: this.comment\n      };\n      await apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" + this.selectedPost.id + \"/comment\", {\n        method: \"POST\",\n        body: JSON.stringify(requestData)\n      });\n      this.comment = \"\";\n      await this.getPosts();\n    },\n    async editComment() {\n      let requestData = {\n        text: this.selectedComment.text\n      };\n      let response = await apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" + this.selectedPost.id + \"/comment/\" + this.selectedComment.id, {\n        method: \"PATCH\",\n        body: JSON.stringify(requestData)\n      });\n      let responseData = await response.json();\n      this.selectedComment.text = responseData.text;\n      this.showInput = false;\n      this.isBeeingEddited = false;\n      this.selectedComment = \"\";\n    },\n    deleteComment() {\n      apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" + this.selectedPost.id + \"/comment/\" + this.selectedComment.id, {\n        method: \"DELETE\"\n      }).then(data => {\n        console.log(data);\n        // remove the item from the local data\n        this.selectedPost.comment_set = this.selectedPost.comment_set.filter(comment => comment.id !== this.selectedComment.id, this.showInput = false);\n      }).catch(error => {\n        // handle error\n        console.log(error);\n      });\n    }\n  },\n  async created() {\n    console.log(\"wjatever\");\n    let response = await apiFetch(`https://dimitarvuik.pythonanywhere.com/blogs/posts/${this.$route.params.username}`);\n    let responseData = await response.json();\n    this.posts = responseData.posts;\n    this.user = responseData.user;\n    const currentUserResponse = await apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/username\");\n    this.currentUser = await currentUserResponse.json();\n  }\n};","map":{"version":3,"mappings":"AAOA;AACA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA,8BACA,oFACA;MACA;MACA;MACAC;IACA;IAEAC;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;MACA;QACAC;MACA;MACA,eACA,wDACA,uBACA,YACA;QACAC;QACAC;MACA,EACA;MACA;MACA;IACA;IACA;MACA;QAAAF;MAAA;MACA,8BACA,wDACA,uBACA,cACA,yBACA;QACAC;QACAC;MACA,EACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACAC,SACA,wDACA,uBACA,cACA,yBACA;QACAH;MACA,EACA,CACAI;QACAT;QACA;QACA,qEACAJ,mDACA,uBACA;MACA,GAEAc;QACA;QACAV;MACA;IACA;EACA;EACA;IACAA;IACA,8BACA,oFACA;IACA;IAEA;IACA;IACA;IACA;EACA;AACA","names":["name","components","post","data","posts","user","currentUser","showInput","selectedComment","selectedPost","comment","commentsShown","isBeeingEddited","methods","console","selectPost","selectComment","showInputFunction","text","method","body","deleteComment","apiFetch","then","catch"],"sourceRoot":"src/views","sources":["UserView.vue"],"sourcesContent":["<template>\n<div>\n  \n</div>\n</template>\n\n<script>\nimport { apiFetch } from \"../main.js\";\nimport post from \"../components/Post.vue\"\nexport default {\n  name: \"UserView\",\n  components: {\n    post\n  },\n  data() {\n    return {\n      posts: [],\n      user: {},\n      currentUser: {},\n      showInput: false,\n      selectedComment: {},\n      selectedPost: {},\n      comment: \"\",\n      commentsShown: false,\n      isBeeingEddited: false,\n    };\n  },\n  methods: {\n    async getPosts() {\n      let response = await apiFetch(\n        \"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" + this.$route.params.username\n      );\n      let responseData = await response.json();\n      this.posts = responseData.posts;\n      console.log(responseData);\n    },\n\n    selectPost(post) {\n      this.selectedPost = post;\n    },\n    selectComment(comm) {\n      if (this.showInput) {\n        this.selectedComment = comm;\n      }\n    },\n    showInputFunction() {\n      this.showInput = !this.showInput;\n      this.selectedComment = \"\";\n    },\n    async createComment() {\n      let requestData = {\n        text: this.comment,\n      };\n      await apiFetch(\n        \"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" +\n          this.selectedPost.id +\n          \"/comment\",\n        {\n          method: \"POST\",\n          body: JSON.stringify(requestData),\n        }\n      );\n      this.comment = \"\";\n      await this.getPosts();\n    },\n    async editComment() {\n      let requestData = { text: this.selectedComment.text };\n      let response = await apiFetch(\n        \"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" +\n          this.selectedPost.id +\n          \"/comment/\" +\n          this.selectedComment.id,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify(requestData),\n        }\n      );\n      let responseData = await response.json();\n      this.selectedComment.text = responseData.text;\n      this.showInput = false;\n      this.isBeeingEddited = false;\n      this.selectedComment = \"\";\n    },\n    deleteComment() {\n      apiFetch(\n        \"https://dimitarvuik.pythonanywhere.com/blogs/posts/\" +\n          this.selectedPost.id +\n          \"/comment/\" +\n          this.selectedComment.id,\n        {\n          method: \"DELETE\",\n        }\n      )\n        .then((data) => {\n          console.log(data);\n          // remove the item from the local data\n          this.selectedPost.comment_set = this.selectedPost.comment_set.filter(\n            (comment) => comment.id !== this.selectedComment.id,\n            (this.showInput = false)\n          );\n        })\n\n        .catch((error) => {\n          // handle error\n          console.log(error);\n        });\n    },\n  },\n  async created() {\n    console.log(\"wjatever\");\n    let response = await apiFetch(\n      `https://dimitarvuik.pythonanywhere.com/blogs/posts/${this.$route.params.username}`\n    );\n    let responseData = await response.json();\n\n    this.posts = responseData.posts;\n    this.user = responseData.user;\n    const currentUserResponse = await apiFetch(\"https://dimitarvuik.pythonanywhere.com/blogs/username\");\n     this.currentUser = await currentUserResponse.json();\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}